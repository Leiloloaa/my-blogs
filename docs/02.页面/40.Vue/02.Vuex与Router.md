---
title: Vuex与Router
date: 2021-03-10 14:36:13
permalink: /pages/493ec2/
categories:
  - 面试
  - Vue
tags:
  - 
---


## Vuex解决了什么问题？

- 多个组件依赖于同一状态时，对于多层嵌套的组件的传参将会非常繁琐，并且对于兄弟组件间的状态传递无能为力。
- 来自不同组件的行为需要变更同一状态。以往采用父子组件直接引用或者通过事件来变更和同步状态的多份拷贝。以上的这些模式非常脆弱，通常会导致无法维护的代码。

## 什么时候用Vuex？

- 多个组件依赖于同一状态时。
- 来自不同组件的行为需要变更同一状态。

## 如何使用？

- 安装 `npm install vuex --save`
- 新建文件夹 stone 以及文件 index.js 并设置好相应结构
```javascript
import Vue from "vue";
import Vuex from "vuex";

Vue.use(Vuex);

export default new Vuex.Store({
    state: {
        // applyPermission: false
    },
    mutations: {
        // changeApplyPermission(state, value) {
        //     state.applyPermission = value;
        // }
    },
    actions: {},
    modules: {}
});
```
- 在 main.js 中挂载到 Vue 实例上
```javascript
import Vue from 'vue';
import App from './App.vue';
import store from './store';
const vm = new Vue({
    store:store,
    render: h => h(App)
}).$mount('#app') 
```

## Vuex的5个核心属性是什么？

> 分别是 **state、getters、mutations、actions、modules**

## Vuex中状态储存在哪里，怎么改变它？

> 存储在state中，改变Vuex中的状态的唯一途径就是**显式地提交 (commit) mutation**。

## Vuex中状态是对象时，使用时要注意什么？

> 因为对象是引用类型，复制后改变属性还是会影响原始数据，这样会改变state里面的状态，是不允许，所以先用深度克隆复制对象，再修改。

## 怎么在组件中批量使用Vuex的state状态？

> 使用mapState辅助函数, 利用对象展开运算符将state混入computed对象中
```javascript
import {mapState} from 'vuex'
export default{
    computed:{
        ...mapState(['price','number'])
    }
} 
```

https://juejin.cn/post/6844903993374670855#heading-13


## 路由之间是怎么跳转的？有哪些方式？

- 声明式 通过使用内置组件`<router-link :to="/home">`来跳转
- 编程式 通过调用router实例的push方法router.push({ path: '/home' })或replace方法router.replace({ path: '/home' })

## 切换路由时，需要保存草稿的功能，怎么实现呢？

```html
<!-- 组件名为 include -->
<keep-alive :include="include">
    <router-view></router-view>
</keep-alive>
```

> keep-alive 是 Vue 的内置组件，当它包裹动态组件时，会缓存不活动的组件实例，而不是销毁它们。和 transition 相似，keep-alive 是一个抽象组件：它自身不会渲染成一个 DOM 元素，也不会出现在父组件链中。
>  meta: {	keepAlive: true  // 需要缓存 } 
```html
<keep-alive>
<router-view v-if="$route.meta.keepAlive"></router-view>
</keep-alive>
<router-view v-if="!$route.meta.keepAlive"></router-view>
```

## 在什么场景下会用到嵌套路由？

> 做个管理系统，顶部栏和左侧菜单栏是全局通用的，那就应该放在父路由，而右下的页面内容部分放在子路由。

## 路由导航守卫和Vue实例生命周期钩子函数的执行顺序？

> 路由导航守卫都是在Vue实例生命周期钩子函数之前执行的。

## 讲一下导航守卫的三个参数的含义？

- to：即将要进入的目标 路由对象。
- from：当前导航正要离开的路由对象。
- next：函数，必须调用，不然路由跳转不过去。
  - next()：进入下一个路由。
  - next(false)：中断当前的导航。
  - next('/')或next({ path: '/' }) : 跳转到其他路由，当前导航被中断，进行新的一个导航。

## route和router有什么区别？

- route是“**路由信息对象**”，包括path，params，hash，query，fullPath，matched，name等路由信息参数。 
- router是“**路由实例对象**”，包括了路由的跳转方法，钩子函数等。

## vue-router有哪几种导航钩子

① 全局导航钩子：一般用来判断权限，以及页面丢失时需要执行的操作；

beforeEach（）每次路由进入之前执行的函数。
afterEach（）每次路由进入之后执行的函数。
beforeResolve（）2.5新增

② 单个路由（实例钩子）

beforeEnter（）
beforeLeave（）

③ 组件路由钩子：

beforeRouteEnter（）
beforeRouteLeave（）
beforeRouteUpdate（）
